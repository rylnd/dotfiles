#!/usr/bin/env bash

## SETUP
  here="`dirname $0`"

  source $here/test_helper
  source $here/../scripts/pair

#1 sets $GIT_AUTHOR_NAME
pair rylnd &> /dev/null
assert equal "$GIT_AUTHOR_NAME" "Ryland Herrick"

#2 sets $GIT_AUTHOR_EMAIL
pair rylnd &> /dev/null
assert match "$GIT_AUTHOR_EMAIL" "rylnd"

#3 unsets $GIT_AUTHOR_NAME
pair -u &> /dev/null
assert blank "$GIT_AUTHOR_NAME"

#4 unsets $GIT_AUTHOR_EMAIL
pair -u &> /dev/null
assert blank "$GIT_AUTHOR_EMAIL"

#5 uses dev@bendyworks.com in the email
pair rylnd &> /dev/null
assert match "$GIT_AUTHOR_EMAIL" "dev.*bendyworks\.com"

#6 sets multiple usernames in the email
pair rylnd bendycode &> /dev/null
assert match "$GIT_AUTHOR_EMAIL" "rylnd"
assert match "$GIT_AUTHOR_EMAIL" "bendycode"

#7 sorts multiple usernames in the email alphabetically
pair rylnd bendycode &> /dev/null
assert match "$GIT_AUTHOR_EMAIL" "bendycode.rylnd@"

#8 sets multiple names for the author
pair rylnd bendycode &> /dev/null
assert match "$GIT_AUTHOR_NAME" "Ryland\ Herrick"
assert match "$GIT_AUTHOR_NAME" "Stephen\ Anderson"

#9 sorts author names alphabetically by username
pair rylnd bendycode &> /dev/null
assert equal "$GIT_AUTHOR_NAME" "Stephen Anderson and Ryland Herrick"

#10 correctly lists more than two authors WITH AN OXFORD COMMA
pair rylnd bendycode bigtiger &> /dev/null
assert equal "$GIT_AUTHOR_NAME" "Stephen Anderson, Jim Remsik, and Ryland Herrick"

## TEARDOWN
  pair -u &> /dev/null
  echo
